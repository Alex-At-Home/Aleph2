<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_45) on Fri Mar 11 16:06:08 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>IHarvestTechnologyModule (aleph2_data_model 1.7.0-SNAPSHOT API)</title>
<meta name="date" content="2016-03-11">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="IHarvestTechnologyModule (aleph2_data_model 1.7.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":18,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IHarvestTechnologyModule.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html" target="_top">Frames</a></li>
<li><a href="IHarvestTechnologyModule.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.ikanow.aleph2.data_model.interfaces.data_import</div>
<h2 title="Interface IHarvestTechnologyModule" class="title">Interface IHarvestTechnologyModule</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">IHarvestTechnologyModule</span></pre>
<div class="block">Harvesters are responsible from taking objects in arbitrary formats over arbitrary transport protocols,
  and doing one of the following things:
   - writing JSON objects to a real-time queue provided by the context
   - dumping JSON/XML/CSV/Seq files in the designated HDFS directory</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>acp</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>default boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#applyNodeAffinity-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">applyNodeAffinity</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;completed_bucket,
                 <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Determines whether the job should be sent to (a) random node(s) every time (cardinality depending on multi_node_enabled/node_rules), or will "stick" with whatever nodes
 first process it.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#canRunOnThisNode-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">canRunOnThisNode</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;bucket,
                <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">This function should check the local environment, decide whether the technology module can run on this node
  (eg is the external software installed? are the environment variables set up correctly etc) and return 
  true/false as quickly as possibly.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onDecommission-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onDecommission</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;to_decommission,
              <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Notification that this bucket is no longer the responsibility of this node (eg the node failed for too long and was removed from the bucket's node affinity).</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onDelete-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onDelete</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;to_delete,
        <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Notification that this bucket is being deleted.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onHarvestComplete-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onHarvestComplete</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;completed_bucket,
                 <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">For batch type harvest technologies (eg file not streaming), this callback is called when a batch is complete</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onInit-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onInit</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">This function is guaranteed to always be called before any callback is called, and can therefore be used to store the context
  It can be used to store the context (which is always passed in anyway) and therefore set up any code that needs to be run.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onNewSource-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-boolean-">onNewSource</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;new_bucket,
           <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context,
           boolean&nbsp;enabled)</code>
<div class="block">Handles either a new bucket associated with this harvester, or an existing bucket
 that was previously associated with a different harvester.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onPeriodicPoll-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onPeriodicPoll</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;polled_bucket,
              <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Periodic poll for statistics collection, health checks, etc.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onPurge-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onPurge</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;to_purge,
       <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Notification that all data for this bucket is to be purged
 Note that the actual purging is performed by the framework, so this is in 
 case the state needs to be updated etc.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onTestSource-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.objects.shared.ProcessingTestSpecBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onTestSource</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;test_bucket,
            <a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/ProcessingTestSpecBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">ProcessingTestSpecBean</a>&nbsp;test_spec,
            <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Handles either a new bucket associated with this harvester, or an existing bucket
 that was previously associated with a different harvester.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#onUpdatedSource-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-boolean-java.util.Optional-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">onUpdatedSource</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;old_bucket,
               <a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;new_bucket,
               boolean&nbsp;is_enabled,
               <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/BucketDiffBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">BucketDiffBean</a>&gt;&nbsp;diff,
               <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Handles changes to an existing bucket</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>default boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html#supportsMultiNode-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">supportsMultiNode</a></span>(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;bucket,
                 <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</code>
<div class="block">Whether this engine can be run in multi-node (defaults to true)</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="onInit-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onInit</h4>
<pre>void&nbsp;onInit(<a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">This function is guaranteed to always be called before any callback is called, and can therefore be used to store the context
  It can be used to store the context (which is always passed in anyway) and therefore set up any code that needs to be run.
  It should return as quickly as possible, eg not block on any lengthy operations.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - - the context for which an instance of this module has been created</dd>
</dl>
</li>
</ul>
<a name="canRunOnThisNode-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canRunOnThisNode</h4>
<pre>boolean&nbsp;canRunOnThisNode(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;bucket,
                         <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">This function should check the local environment, decide whether the technology module can run on this node
  (eg is the external software installed? are the environment variables set up correctly etc) and return 
  true/false as quickly as possibly. (Will often default to just 'return true;')</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bucket</code> - - the bucket to check against (mostly this will be ignored, ie the function will just decide based on the technology module alone - but this enables the code to be cleverer, eg check the sub-modules as well)</dd>
<dd><code>context</code> - - the context for which an instance of this module has been created</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this node can run this module's functionality</dd>
</dl>
</li>
</ul>
<a name="supportsMultiNode-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>supportsMultiNode</h4>
<pre>default&nbsp;boolean&nbsp;supportsMultiNode(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;bucket,
                                  <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Whether this engine can be run in multi-node (defaults to true)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bucket</code> - - the bucket to check against (mostly this will be ignored, ie the function will just decide based on the technology module alone - but this enables the code to be cleverer, eg check the sub-modules as well)</dd>
<dd><code>context</code> - - the context for which an instance of this module has been created</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>whether this engine can be run in multi-node (defaults to true)</dd>
</dl>
</li>
</ul>
<a name="onNewSource-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onNewSource</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onNewSource(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;new_bucket,
                                                <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context,
                                                boolean&nbsp;enabled)</pre>
<div class="block">Handles either a new bucket associated with this harvester, or an existing bucket
 that was previously associated with a different harvester.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>new_bucket</code> - - a new bucket associated with this harvester</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dd><code>enabled</code> - - whether the bucket is enabled</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response</dd>
</dl>
</li>
</ul>
<a name="onUpdatedSource-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-boolean-java.util.Optional-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onUpdatedSource</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onUpdatedSource(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;old_bucket,
                                                    <a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;new_bucket,
                                                    boolean&nbsp;is_enabled,
                                                    <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/BucketDiffBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">BucketDiffBean</a>&gt;&nbsp;diff,
                                                    <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Handles changes to an existing bucket</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>old_bucket</code> - - the updated bucket</dd>
<dd><code>new_bucket</code> - - the updated bucket</dd>
<dd><code>is_enabled</code> - - whether the bucket is currently enabled (note - you cannot infer anything about the previous enabled/suspended state unless the diff optional is present)</dd>
<dd><code>diff</code> - - optionally what information has changed (including changes to shared library beans). If this is not present (it will not be in early versions of the platform), developers must assume everything has changed, eg restarting the external service.</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response</dd>
</dl>
</li>
</ul>
<a name="onPurge-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onPurge</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onPurge(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;to_purge,
                                            <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Notification that all data for this bucket is to be purged
 Note that the actual purging is performed by the framework, so this is in 
 case the state needs to be updated etc.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>to_purge</code> - - the bucket that is going to be purged</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response</dd>
</dl>
</li>
</ul>
<a name="onDelete-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDelete</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onDelete(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;to_delete,
                                             <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Notification that this bucket is being deleted.
 The framework is responsible for removing all data associated with the bucket
 It is the harvester's responsibility to stop collecting/forwarding data (and not resolve
 the BasicMessageBean until then).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>to_delete</code> - - the bucket that is being deleted</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response</dd>
</dl>
</li>
</ul>
<a name="onDecommission-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDecommission</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onDecommission(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;to_decommission,
                                                   <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Notification that this bucket is no longer the responsibility of this node (eg the node failed for too long and was removed from the bucket's node affinity).
 This method should check that any external processes running on this node are cleaned up - but the bucket itself's state has not changed, therefore eg if 
 managing a distributed technology then the bucket shoud be left alone.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>to_delete</code> - - the bucket that is being deleted</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response</dd>
</dl>
</li>
</ul>
<a name="onPeriodicPoll-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onPeriodicPoll</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onPeriodicPoll(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;polled_bucket,
                                                   <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Periodic poll for statistics collection, health checks, etc.
 The poll frequency is determined by the bucket</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>polled_bucket</code> - The bucket being polled</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response</dd>
</dl>
</li>
</ul>
<a name="onHarvestComplete-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onHarvestComplete</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onHarvestComplete(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;completed_bucket,
                                                      <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">For batch type harvest technologies (eg file not streaming), this callback is called when a batch is complete</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>completed_bucket</code> - The bucket whose batch has completed</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response</dd>
</dl>
</li>
</ul>
<a name="onTestSource-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.objects.shared.ProcessingTestSpecBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onTestSource</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/BasicMessageBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">BasicMessageBean</a>&gt;&nbsp;onTestSource(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;test_bucket,
                                                 <a href="../../../../../../com/ikanow/aleph2/data_model/objects/shared/ProcessingTestSpecBean.html" title="class in com.ikanow.aleph2.data_model.objects.shared">ProcessingTestSpecBean</a>&nbsp;test_spec,
                                                 <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Handles either a new bucket associated with this harvester, or an existing bucket
 that was previously associated with a different harvester.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>test_bucket</code> - - the bucket to test</dd>
<dd><code>test_spec</code> - - a specification describing the test related overrides</dd>
<dd><code>context</code> - - the context available to this harvester</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future for the response (only completes when the test is complete)</dd>
</dl>
</li>
</ul>
<a name="applyNodeAffinity-com.ikanow.aleph2.data_model.objects.data_import.DataBucketBean-com.ikanow.aleph2.data_model.interfaces.data_import.IHarvestContext-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>applyNodeAffinity</h4>
<pre>default&nbsp;boolean&nbsp;applyNodeAffinity(<a href="../../../../../../com/ikanow/aleph2/data_model/objects/data_import/DataBucketBean.html" title="class in com.ikanow.aleph2.data_model.objects.data_import">DataBucketBean</a>&nbsp;completed_bucket,
                                  <a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import">IHarvestContext</a>&nbsp;context)</pre>
<div class="block">Determines whether the job should be sent to (a) random node(s) every time (cardinality depending on multi_node_enabled/node_rules), or will "stick" with whatever nodes
 first process it. Setting to "false" will improve the robustness when the underlying technology is fundamentally distributed (ie all you're doing is making an
 API call to an external service, vs launching a process on box)
 Defaults to true for harvest technologies (and false for analytic technologies).
 IMPORTANT: If the completed_bucket does not have lock_to_nodes set then should return the default 
 Very odd and not necessaritly easily recoverable results will occur if this is wrong, so beware of changing from the default unless you know 
 what you're doing!</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>completed_bucket</code> - </dd>
<dd><code>context</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IHarvestTechnologyModule.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestContext.html" title="interface in com.ikanow.aleph2.data_model.interfaces.data_import"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/ikanow/aleph2/data_model/interfaces/data_import/IHarvestTechnologyModule.html" target="_top">Frames</a></li>
<li><a href="IHarvestTechnologyModule.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
